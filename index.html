<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Video on Demand</title>
		<link href="https://unpkg.com/video.js@6.7.1/dist/video-js.css" rel="stylesheet" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/videojs-resolution-switcher-vjs7@1.0.0/videojs-resolution-switcher.css" />
		<style>
			.vjs-big-play-button {
				position: absolute !important;
				top: 50% !important;
				left: 50% !important;
				transform: translate(-50%, -50%) !important;
				background-color: red !important;
				border: 0 !important;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<div class="row">
				<div class="col-md-8">
					<video-js id="my_video_1" class="vjs-default-skin vjs-16-9" controls preload="auto" width="100%" height="350">
						<source src="https://multiplatform-f.akamaihd.net/i/multi/will/bunny/big_buck_bunny_,640x360_400,640x360_700,640x360_1000,950x540_1500,.f4v.csmil/master.m3u8" type="application/x-mpegURL" />
					</video-js>
				</div>
			</div>
		</div>
		<script src="https://unpkg.com/video.js@6.7.1/dist/video.js"></script>
		<script src="https://unpkg.com/@videojs/http-streaming@0.9.0/dist/videojs-http-streaming.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-quality-levels/2.1.0/videojs-contrib-quality-levels.min.js"></script>
		<script src="https://www.unpkg.com/videojs-hls-quality-selector@1.0.5/dist/videojs-hls-quality-selector.min.js"></script>
		<script>
			function setCookie(cname, cvalue, exdays) {
				const d = new Date()
				d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000)
				let expires = "expires=" + d.toUTCString()
				document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/"
			}

			function getCookie(cname) {
				let name = cname + "="
				let ca = document.cookie.split(";")
				for (let i = 0; i < ca.length; i++) {
					let c = ca[i]
					while (c.charAt(0) == " ") {
						c = c.substring(1)
					}
					if (c.indexOf(name) == 0) {
						return c.substring(name.length, c.length)
					}
				}
				return ""
			}

			function checkCookie(identifier) {
				let cookie = getCookie(identifier)
				if (cookie != "") {
					return cookie
				} else {
					return ""
				}
			}
			var player = videojs("my_video_1", {
				html5: {
					hls: {
						overrideNative: true,
					},
				},
			})
			player.hlsQualitySelector()

			window.onunload = function () {
				setCookie(player.currentSrc(), player.currentTime(), 33)
			}
		</script>
	</body>
</html>
